/*!
 * ResponsiveGauge
 * version : 0.1.0
 * license : MIT
 * author : MikaÃ«l Restoux
 * 
 */
var ReactiveGaugeFactory=function(e,t){"use strict";"undefined"==typeof d3&&(d3=e),"undefined"==typeof numbro&&(numbro=t);var a=6,r=2,n=100,i=40,o=numbro(),l=function(e,t){if(void 0===this.FORMAT){if(t)var a=(this.labelMantissaMax,this.labelDecimalsMax);else var a=(this.valueMantissaMax,this.valueDecimalsMax);0===a?this.FORMAT=a+".a":this.FORMAT=NaN+new Array(a+1).join("0")+"]a"}return o.set(e).format(this.FORMAT)},s={ringInset:3,ringWidth:7,minAngle:-90,maxAngle:90,sectorsNumber:5,border:!1,pointerType:"needle",pointerSlowness:200,needleLength:90,filamentLength:2,fillerWidth:NaN,fillerInset:0,minValue:0,maxValue:10,value:0,labelNumber:NaN,labelFormater:function(e){return l.call(this,e,!0)},labelMantissaMax:4,labelDecimalsMax:0,labelInset:0,colors:!1,startColor:"#ffebee",endColor:"#810301",showValue:!0,valueInset:22,valueFormater:function(e){return l.call(this,e,!1)},valueMantissaMax:4,valueDecimalsMax:0,valueUnit:""},u=function(e,t){function o(e){return e*Math.PI/180}function l(){if(isNaN(b.labelNumber)&&(b.labelNumber=b.sectorsNumber),0===b.labelNumber)return[];var e=(b.maxValue-b.minValue)/(b.labelNumber-1),t=d3.range(b.minValue,b.maxValue,e);return t.push(b.maxValue),t}function u(e){for(var t in s)b[t]=s[t];for(var t in e)b[t]=e[t],void 0===s[t]&&console.warn("Config property "+t+" is unknwon");b.FORMAT=void 0,b.labelFormater=b.labelFormater.bind(b),b.valueFormater=b.valueFormater.bind(b),M=b.maxAngle-b.minAngle,m(),x=d3.scale.linear().range([0,1]).domain([b.minValue,b.maxValue]),V=l(),b.colors.constructor===Array?(R=d3.range(b.sectorsNumber).map(function(){return 1/b.sectorsNumber}),T=function(e){var t=Math.floor(e*b.sectorsNumber);return t=Math.min(t,b.colors.length-1),b.colors[t]}):b.colors?(R="gradient"===b.colors?d3.range(i).map(function(){return 1/i}):d3.range(b.sectorsNumber).map(function(){return 1/b.sectorsNumber}),T=d3.interpolateHsl(d3.rgb(b.startColor),d3.rgb(b.endColor))):R=[1],I=d(function(e,t){var a=e*t,r=0===t?0:.5;return o(b.minAngle+a*M-r)},function(e,t){var a=e*(t+1);return o(b.minAngle+a*M)},b.ringWidth,b.ringInset),b.border&&(w=d(o(b.minAngle),o(b.maxAngle),b.ringWidth,b.ringInset)),"filler"===b.pointerType&&isNaN(b.fillerWidth)&&(b.fillerWidth=b.ringWidth,b.fillerInset=b.ringInset)}function d(e,t,a,r){return d3.svg.arc().innerRadius(h-a-r).outerRadius(h-r).startAngle(e).endAngle(t)}function c(){var e=JSON.parse(JSON.stringify(b));return Object.freeze(e),e}function m(){function e(e){return[t(n+e),t(i+e)]}function t(e){return l*Math.sin(o(e))}for(var r=a,n=b.minAngle,i=b.maxAngle,l=h-Math.min(b.ringInset,b.fillerInset,b.labelInset),s=0,u=0,d=0,c=0,m=Math.floor(n/90),f=Math.floor(i/90),p=m;f>=p;p++)switch(p%4){case 0:d=l;break;case 1:u=l;break;case 2:c=l;break;case 3:s=l}var g=e(0),v=e(-90);s=Math.abs(Math.min(-s,g[0],g[1])),u=Math.max(u,g[0],g[1]),d=Math.abs(Math.min(-d,v[0],v[1])),c=Math.max(c,v[0],v[1]),W=s+u+2*r,O=d+c+2*r,q=d+r,C=s+r;var M=3*l+4*r;O+W>M&&(j=!0,W+=2*r,O+=2*r,q+=r,C+=r)}function f(t){u(t),N=d3.select(e).classed("wide-gauge",j),y=N.append("svg:svg").attr("class","gauge").attr("viewBox","0 0 "+W+" "+O).attr("preserveAspectRatio","xMinYMin meet");var a="translate("+C+","+q+")",n=y.append("g").attr("class","gauge-arc").attr("transform",a),i=n.selectAll("path").data(R).enter().append("path").attr("d",I);b.colors&&i.attr("fill",function(e,t){return T(e*t)}),b.border&&n.append("path").attr("fill","none").attr("class","gauge-arc-border").attr("d",w);var o=d3.svg.line().interpolate("monotone"),l=y.append("g").attr("class","gauge-pointer gauge-"+b.pointerType).attr("transform",a);if("filler"===b.pointerType)F=l.append("path");else if("needle"===b.pointerType)F=l.data([[[0,-r],[0,-b.needleLength/2]]]).append("path").attr("d",o),l.append("circle").attr("r",r);else if("filament"===b.pointerType){var s=h-b.ringInset-b.ringWidth-b.filamentLength,d=h-b.ringInset+b.filamentLength;F=l.data([[[0,-s],[0,-d]]]).append("path").attr("d",o)}y.append("g").attr("class","gauge-label").attr("transform",a).selectAll("text").data(V).enter().append("g").attr("transform",function(e){var t=x(e),a=b.minAngle+t*M;return"rotate("+a+") translate(0,"+(b.labelInset-h)+")"}).append("text").text(b.labelFormater);if(b.showValue){var c=b.valueInset,m=b.minAngle+Math.abs(M)/2;j&&(c=0,m=0);var f="translate(0, "+-c+")",p=y.append("g").attr("class","gauge-value").attr("transform",a+" rotate("+m+")").append("g").attr("transform",f+" rotate("+-m+")").append("text");A=p.append("tspan"),p.append("tspan").text(b.valueUnit).attr("class","unit").attr("x",0).attr("dy","1em")}}function p(e){if("filler"===b.pointerType){var t=d(o(b.minAngle),o(v(e)),b.fillerWidth,b.fillerInset);F.attr("d",t)}else F.transition().duration(b.pointerSlowness).ease("elastic").attr("transform","rotate("+v(e)+")")}function g(e,t){e=void 0===e?0:e,p(e),b.showValue&&A.text(b.valueFormater(e))}function v(e){var t=Math.max(e,b.minValue);t=Math.min(t,b.maxValue);var a=x(t);return b.minAngle+a*M}var b={},h=n/2,M=void 0,x=void 0,A=void 0,N=void 0,y=void 0,F=void 0,I=void 0,w=void 0,V=void 0,R=void 0,T=void 0,j=!1,W=0,O=0,C=0,q=0;return f(t),g(b.value),{update:g,getConfig:c,container:N}};if(u.config=s,"undefined"!=typeof module&&module.exports)module.exports=u;else{if("undefined"!=typeof requirejs)return u;this.ReactiveGauge=u}};if("undefined"!=typeof module&&module.exports){const d3=require("d3"),numbro=require("numbro");ReactiveGaugeFactory(d3,numbro)}else if("undefined"!=typeof requirejs){var protocol=document.location.protocol;protocol="file:"===protocol?"http:":protocol,requirejs.config({paths:{d3:protocol+"//cdn.jsdelivr.net/d3js/3.5.16/d3.min",numbro:protocol+"//cdnjs.cloudflare.com/ajax/libs/numbro/1.7.1/numbro.min"}}),define(["d3","numbro"],function(e,t){return ReactiveGaugeFactory(e,t)})}else ReactiveGaugeFactory.call("undefined"==typeof window?this:window);